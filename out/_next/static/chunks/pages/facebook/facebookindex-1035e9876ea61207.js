(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{2415:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/facebook/facebookindex",function(){return l(8805)}])},2222:function(e,t,l){"use strict";var a=l(5893),s=l(1163),n=l(7294);let c=e=>{let{id:t,noWrapper:l,text:c,disabled:o,onbeforeSubmit:i}=e,[r,d]=(0,n.useState)(!1),[u,f]=(0,n.useState)(!1),h=(0,s.useRouter)(),m=(null==t?void 0:t.includes("https"))?t:"https://kloun.lol/joke/".concat(t),x=async()=>{d(!0),f(!0),"function"==typeof i&&(m=await i()),await fetch("/api/refetch/?url=".concat(m)),d(!1),f(!0),h.push("https://facebook.com/dialog/share?\n			app_id=456304742501728\n			&display=popup\n			&href=".concat(encodeURIComponent(m),"\n			&redirect_uri=").concat(encodeURIComponent(m)))};return(0,a.jsx)("button",{onClick:x,className:"text-white  transition duration-300 max-w-xs w-full rounded-3xl uppercase flex text-sm font-bold p-3  relative  ".concat(l&&" rounded-l-none rounded-t-none bg-transparent"," ").concat(u&&"btn-disabled grayscale"," ").concat(o&&"btn-disabled grayscale"),style:{backgroundColor:l?"transparent":"#1877F3"},children:l?(0,a.jsx)("svg",{className:"h-6 w-6 fill-white dark:fill-blue-600 ",role:"img",xmlns:"http://w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute h-full left-3 top-0 flex justify-center items-center",children:r?(0,a.jsxs)("svg",{className:"animate-spin h-6 w-6 fill-white drop-shadow-md",xmlns:"http://w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:12,cy:12,r:10,stroke:"currentColor",strokeWidth:4}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"h-6 w-6 fill-white drop-shadow-md",role:"img",xmlns:"http://w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,a.jsx)("div",{className:"w-full ml-6 flex justify-center items-center pt-0.5 drop-shadow-md",children:c||"Сподели във Facebook"})]})})};t.Z=c},8469:function(e,t,l){"use strict";var a=l(5893),s=l(1664),n=l.n(s);let c=e=>{let{cats:t,limit:l,prefix:s,formatlength:c}=e,o=t.slice(0,l||t.length),i=e=>e>3e3?"".concat(Math.floor(e/1e3),"k"):e;return(0,a.jsx)("div",{className:"my-3 flex w-full flex-wrap gap-3",children:o.map(e=>(0,a.jsx)(n(),{className:"w-full grow sm:w-1/2 md:w-1/3   lg:w-1/4 xl:w-1/5",href:e.althref?"/".concat(s,"/").concat(e.althref):"/".concat(s,"/").concat(e.slug,"/"),passHref:!0,children:(0,a.jsxs)("div",{className:"flex h-full items-center rounded border border-gray-800 bg-gray-800   p-4 dark:border-gray-500 dark:bg-slate-100",children:[(0,a.jsx)("div",{className:"flex-1  justify-center align-middle text-white dark:text-gray-800",children:c?(0,a.jsx)("span",{className:"text-shadow text-xs",children:e.cat}):(0,a.jsx)("span",{className:"text-shadow font-black",children:e.cat})}),0!==e.count&&(0,a.jsx)("div",{className:"btn1-count",children:i(e.count)}),void 0!==e.altcount&&(0,a.jsx)("div",{className:"flex-none  rounded bg-green-700 px-2 text-2xl font-extralight",children:e.altcount})]})},e.cat))})};t.Z=c},8805:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSP:function(){return z},default:function(){return H},runtime:function(){return M}});var a=l(5893),s=l(7097),n=l(1817),c=l(8469),o=l(2222),i=l(7297),r=l(7294),d=l(2938);async function u(e){let{query:t,variables:l,operationName:a}=e,s=await fetch("https://n5hlcijfibe3zacynh4p3mk4w4.appsync-api.eu-west-1.amazonaws.com/graphql",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"da2-lyxskmkifbcrzbjbczvujpzhwa"},body:JSON.stringify({query:t,variables:l,operationName:a})}),n=await s.json();return n.data}async function f(e,t){let l=e.definitions[0],a=await u({query:(0,d.S)(e),variables:t,operationName:l.name.value});return t.multi?a:Object.values(a)[0]}async function h(e,t){let l=await f(e,t);return l}var m=l(1189),x=l(6486);function p(){let e=(0,i.Z)(['\n      mutation MyMutation($id: String!, $data: AWSJSON) {\n        createDdb(\n          input: {id: $id, subcat: $id, data: $data, nid: "A", deepness: 1}\n        ) {\n          id\n        }\n      }\n    ']);return p=function(){return e},e}async function v(e){return new Promise((t,l)=>{let a=new Image;a.onload=()=>t(),a.onerror=l,a.src=e})}let g=async(e,t)=>{let l=await h((0,m.Ps)(p()),{id:e,data:t});return l},w=e=>localStorage.getItem(e),j=(e,t)=>localStorage.setItem(e,t),b=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"container overflow-hidden  rounded-xl bg-gradient-to-r from-pink-500 to-violet-500 h-fit",style:{maxWidth:640},children:(0,a.jsx)("div",{className:"flex justify-center items-center  m-1 rounded-lg relative overflow-hidden   bg-black/80",children:t})})},N=e=>{let{name:t}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)("div",{className:"absolute",children:(0,a.jsx)("p",{className:"text-4xl md:text-5xl font-bold text-center bg-clip-text text-transparent bg-gradient-to-r from-rose-100 to-teal-100",children:t})}),(0,a.jsxs)("div",{className:"flex h-full w-full absolute justify-center items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin   h-12 w-12 text-white",xmlns:"http://w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:12,cy:12,r:10,stroke:"currentColor",strokeWidth:4}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{className:"animate-ping  absolute inline-flex h-full w-full rounded-full   opacity-75 bg-black  "})]}),(0,a.jsx)("svg",{className:"w-full h-full  ",width:"640",height:"336",viewBox:"0 0 640 336",fill:"none",xmlns:"http://w3.org/2000/svg"})]})};var y=l(1163);function k(e,t){let l=_(e);if(!l){let l=new Date;l.setDate(l.getDate()+30),document.cookie="".concat(e,"=").concat(t,"; expires=").concat(l.toUTCString())}}function _(e){let t=document.cookie.match("(^|;) ?".concat(e,"=([^;]*)(;|$)"));return t?t[2]:null}var C=function(e){let{app:t,env:l,code:s}=e,n=(0,y.useRouter)(),[c,o]=(0,r.useState)(!1),[i,d]=(0,r.useState)(null),u="456304742501728",f="dev"===l?"https://localhost:3001/fb/":"https://kloun.lol/fb/";(0,r.useEffect)(()=>{let e=_("token");e&&d(e)},[]),(0,r.useEffect)(()=>{let e=async()=>{let e=await fetch("https://graph.facebook.com/oauth/access_token?client_id=".concat(u,"&client_secret=").concat(atob("NjJhYzRjNWFkMTc4ZjcxYjJmMDBiODQ0ZDdmNDVlZjY="),"&redirect_uri=").concat(f,"&code=").concat(s)),t=await e.json();if(t.access_token){k("token",t.access_token),d(t.access_token);let e=_("redirect");n.push(f+""+e)}};s&&e()},[s]);let h=()=>{o(!0),k("redirect",(null==t?void 0:t.slug)||"");let e="https://www.facebook.com/dialog/oauth?client_id=".concat(u,"&redirect_uri=").concat(f,"&scope=").concat("public_profile,email","&response_type=").concat("code");window.location.href=e};return(null==t?void 0:t.cat)&&!i?(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsxs)("button",{className:"text-white  transition duration-300 max-w-xs w-full rounded-3xl uppercase flex text-sm font-bold p-3  relative ",style:{backgroundColor:"#1877F3"},onClick:h,children:[(0,a.jsx)("div",{className:"absolute h-full left-3 top-0 flex justify-center items-center",children:c?(0,a.jsxs)("svg",{className:"animate-spin h-6 w-6 fill-white drop-shadow-md",xmlns:"http://w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:12,cy:12,r:10,stroke:"currentColor",strokeWidth:4}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"h-6 w-6 fill-white drop-shadow-md",role:"img",xmlns:"http://w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,a.jsx)("div",{className:"w-full ml-6 flex justify-center items-center pt-0.5 drop-shadow-md",children:"Използвай facebook"})]})}):(0,a.jsx)(a.Fragment,{})};let S=e=>{let{cats:t,result:l,appid:i,shareid:d,app:u,env:f,code:h}=e,[m,p]=(0,r.useState)({params:"",refreshid:"default"}),[y,k]=function(e){let[t,l]=(0,r.useState)(null),[a,s]=(0,r.useState)(null),n=(0,r.useRef)((0,x.throttle)(e=>{g("test",JSON.stringify(e)).then(e=>{j("result",e.id)})},1500));return(0,r.useEffect)(()=>n.current(a),[a]),(0,r.useEffect)(()=>{let t=w((null==e?void 0:e.slug)+"v2"),a=async a=>{await v("/fbapps/".concat(null==e?void 0:e.slug,"/back.png")),await v("/api/facebook/".concat(null==e?void 0:e.slug,"/svg/").concat(t,"/res/").concat(t,"/")),l(a)},s=async()=>{let t=Math.floor(Math.random()*((null==e?void 0:e.items)||0));j("".concat(null==e?void 0:e.slug).concat("v2"),t.toString()),await v("/fbapps/".concat(null==e?void 0:e.slug,"/back.png")),await v("/api/facebook/".concat(null==e?void 0:e.slug,"/svg/").concat(t,"/res/").concat(t,"/")),l(t)};e&&!t&&s(),t&&a(Number(t))},[e]),[t,s]}(u);return(0,a.jsxs)(s.Z,{meta:(0,a.jsx)(n.Z,{title:(null==l?void 0:l.title)||(null==u?void 0:u.cat)||"Фейсбук приложения",description:(null==l?void 0:l.description)||(null==u?void 0:u.description)||"Фейсбук приложения",image:d?"https://kloun.lol/img/".concat(i,"/").concat(d,".png"):"https://kloun.lol/images/og.jpg",noIndex:d}),children:[(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[y&&(0,a.jsx)(b,{children:(0,a.jsxs)("div",{className:"relative flex bg",children:[(0,a.jsx)("img",{className:"w-full h-full",src:"https://kloun.pages.dev/images/placeholderfb.png"}),(0,a.jsx)("div",{className:"flex absolute top-0 w-full",children:(0,a.jsx)("picture",{className:"w-full",children:(0,a.jsx)("img",{src:"/fbapps/".concat(null==u?void 0:u.slug,"/back.png"),alt:"",className:"w-full"})})}),(0,a.jsx)("picture",{className:"w-full absolute top-0",children:(0,a.jsx)("img",{src:"/api/facebook/".concat(null==u?void 0:u.slug,"/svg/").concat(y,"/res/").concat(y,"/").concat(m.params),alt:"",className:"w-full"})})]})}),!y&&u&&(0,a.jsx)(N,{name:null==u?void 0:u.cat})]}),(0,a.jsx)("div",{className:"pt-1",children:(0,a.jsx)(C,{app:u,env:f,code:h})}),(0,a.jsxs)("div",{className:"container mx-auto",children:[u&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-center items-center my-3",children:(0,a.jsx)(o.Z,{onbeforeSubmit:function(){return new Promise(e=>{let t=w("result");e("https://kloun.lol/fb/".concat(null==u?void 0:u.slug,"/").concat(y,"_").concat(t))})},disabled:!y,text:null==u?void 0:u.button,id:""})}),(0,a.jsx)("p",{children:null==u?void 0:u.description})]}),(0,a.jsx)("ins",{className:"adsbygoogle w-full",style:{dislay:"block",width:250},"data-ad-format":"fluid","data-ad-layout-key":"-hh-7+2h-1m-4u","data-ad-client":"ca-pub-5476404733919333","data-ad-slot":"6719003089"}),(0,a.jsx)(c.Z,{cats:t,prefix:"fb"}),(0,a.jsx)("div",{className:"my-10 flex w-full flex-col",children:(0,a.jsx)("div",{className:"flex flex-wrap"})})]})]})};var z=!0;let M="experimental-edge";var H=S}},function(e){e.O(0,[662,340,464,938,725,774,888,179],function(){return e(e.s=2415)}),_N_E=e.O()}]);